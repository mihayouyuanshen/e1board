/******************************************************************************/
/*    Description    :ログ管理ミドル コンフィグ                                 */
/*----------------------------------------------------------------------------*/
/*    Author         :DHC Jiang.Z                                             */
/*----------------------------------------------------------------------------*/
/*    Date           :2023/04/11                                              */
/*----------------------------------------------------------------------------*/
/*    Module Name    :                                                        */
/*----------------------------------------------------------------------------*/
/*    Note           :                                                        */
/*----------------------------------------------------------------------------*/
/*    Copyright      :(c) 2020 NICHICON CORPORATION                           */
/******************************************************************************/

/*----------------------------------------------------------------------------*/
/* Include Header File                                                        */
/*----------------------------------------------------------------------------*/
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <task_g.h>
#include "typedef.h"

#include "elog_g.h"
#include "elog_utl_g.h"
#include "elog_file_g.h"
#include "elog_val_g.h"

/*----------------------------------------------------------------------------*/
/* 公開変数定義                                                                */
/*----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*/
/* 非公開変数定義                                                              */
/*----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*/
/* 公開関数定義                                                                */
/*----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*/
/* 非公開関数定義                                                              */
/*----------------------------------------------------------------------------*/






/*============================================================================*/
/*    Description    :コンフィグ値で初期化する                                  */
/*----------------------------------------------------------------------------*/
/*    param          :ElogLv_t    level                                       */
/*----------------------------------------------------------------------------*/
/*    param          :slong    msgId                                          */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                   0:Sucess -1:Failed                                       */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/04/11  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
void ELOG_CnfInit(void)
{
	/* コンフィグファイルの読み込み */
	ELOG_FileReadConfig();
	ELOG_ValPrintVariable();
}

/*============================================================================*/
/*    Description    :ログレベルを設定する                                      */
/*----------------------------------------------------------------------------*/
/*    param          :ElogLv_t    level                                       */
/*----------------------------------------------------------------------------*/
/*                   :slong    msgId                                          */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                    ELOG_OK(0)    正常 /ELOG_E_PROCS(-3)    処理エラー       */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/03/31  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
slong ELOG_CnfSetLevel(ElogLv_t level, slong msgId)
{
	bool_t ret;
	slong tmpRet = ELOG_OK;
	DEBUG_TRCIN();

	/* ;/.;8の更新 */
	ELOG_ValSetLevel(level, msgId);

	/* ファイルの更新 */
	ret = ELOG_FileWriteConfig();
	if(ret == FALSE)
	{
		tmpRet = ELOG_E_PROCS;
	}

	DEBUG_TRCOUT();
	return tmpRet;
}

/*============================================================================*/
/*    Description    :ログレベルを取得する                                      */
/*----------------------------------------------------------------------------*/
/*    param          :ElogLv_t    level                                       */
/*----------------------------------------------------------------------------*/
/*    param          :slong    msgId                                          */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                    0:Sucess -1:Failed                                      */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/04/11  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
ElogLv_t ELOG_CnfGetLevel(slong msgId)
{
	DEBUG_TRCIN();
	/* テーブルの参照 */
	return(ELOG_ValGetLevel(msgId));
	DEBUG_TRCOUT();
}

/*============================================================================*/
/*    Description    :ログの有効無効を切り替える                                */
/*----------------------------------------------------------------------------*/
/*    param          :ElogLv_t    level                                       */
/*----------------------------------------------------------------------------*/
/*    param          :slong    msgId                                          */
/*----------------------------------------------------------------------------*/
/*    return         :0:Sucess -1:Failed                                      */
/*                    0    正常 / -1    ファイル書き込み失敗                    */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/03/31  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
slong ELOG_CnfSetEnable(bool_t onOff,slong msgId)
{
	bool_t ret;
	slong tmpRet = ELOG_OK;
	DEBUG_TRCIN();

	/* テーブルの更新 */
	ELOG_ValSetEnable(onOff,msgId);
	/* ファイルの更新 */
	ret = ELOG_FileWriteConfig();
	if(ret == FALSE)
	{
		tmpRet = ELOG_E_PROCS;
	}
	else
	{
		/*Do nothing*/
	}
	DEBUG_TRCOUT();
	return tmpRet;
}

/*============================================================================*/
/*    Description    :ログOn/Offを取得する                                     */
/*----------------------------------------------------------------------------*/
/*    param          :bool_t    onOff                                         */
/*----------------------------------------------------------------------------*/
/*                   :slong    msgId                                          */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                    0:Sucess -1:Failed                                      */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/04/11  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
bool_t ELOG_CnfGetEnable(slong msgId)
{
	/* テーブルの参照 */
	return(ELOG_ValGetEnable(msgId));
}

/*============================================================================*/
/*    Description    :全プロセスのログの有効無効を切り替える                     */
/*----------------------------------------------------------------------------*/
/*    param          :ElogLv_t    level                                       */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                    0:Sucess -1:Failed                                      */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/04/11  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
slong ELOG_CnfSetEnableAll(bool_t onOff)
{
	bool_t retCfg;
	slong ret = ELOG_OK;
	/* テーブルの更新 */
	ELOG_ValSetEnableAll(onOff);

	/* ファイルの更新 */
	retCfg = ELOG_FileWriteConfig();
	if(retCfg == FALSE)
	{
		ret = ELOG_E_PROCS;
	}
	return ret;
}

/*============================================================================*/
/*    Description    :全プロセスのログOn/Offを取得する                          */
/*----------------------------------------------------------------------------*/
/*    param          :bool_t    onOff                                         */
/*----------------------------------------------------------------------------*/
/*    return         :                                                        */
/*                    0:Sucess -1:Failed                                      */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/04/11  : DHC Jang.Z : 新規作成                      */
/*============================================================================*/
bool_t ELOG_CnfGetEnableAll(void)
{
	bool_t ret;
	/* テーブルの参照 */
	ret = ELOG_ValGetEnableAll();
	return ret;
}


/* End Of File */