/****************************************************************************/
/*	Description		:EEPROM管理プロセスソースコード							*/
/*--------------------------------------------------------------------------*/
/*	Author			:DHC Cao.HZ												*/
/*--------------------------------------------------------------------------*/
/*	Date			:2023/03/16												*/
/*--------------------------------------------------------------------------*/
/*	Module Name		:EEEP													*/
/*--------------------------------------------------------------------------*/
/*	Note			:														*/
/*--------------------------------------------------------------------------*/
/*	Copyright		:(c) 2020 NICHICON CORPORATION							*/
/****************************************************************************/

/*--------------------------------------------------------------------------*/
/*	Include Header File														*/
/*--------------------------------------------------------------------------*/
#include "frm_g.h"
#include "task_g.h"
#include "dlog_g.h"
#include "eeep_cmn_g.h"
#include "eeep_serv_g.h"
#include "eeep_g.h"
#include "etest_g.h"
#include "esys_g.h"

/*--------------------------------------------------------------------------*/
/*	公開関数定義															*/
/*--------------------------------------------------------------------------*/
/*==========================================================================*/
/*	Description		:														*/
/*--------------------------------------------------------------------------*/
/*	param			:														*/
/*--------------------------------------------------------------------------*/
/*	return			:														*/
/*--------------------------------------------------------------------------*/
/*	detail			:														*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/03/16 : DHC Cao.HZ : 新規作成						*/
/*==========================================================================*/
void EEEP_Init()
{
	DEBUG_TRCIN();
	DEBUG_TRCOUT();
}

/*==========================================================================*/
/*	Description		:EEEP入力制御メッセージプロセス処理							*/
/*--------------------------------------------------------------------------*/
/*	param			:FrmMsgHead_t *msg										*/
/*--------------------------------------------------------------------------*/
/*	return			:void													*/
/*--------------------------------------------------------------------------*/
/*	detail			:														*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/03/16 : DHC Cao.HZ : 新規作成						*/
/*==========================================================================*/
void EEEP_MsgProc(FrmMsgHead_t const *msg)
{
	DEBUG_TRCIN();
	switch(msg->attr) {
	case FRM_MSG_ASYNC:
		/* header.MsgIdで各処理に分岐 */
		switch(msg->msgId){
		case EEEP_MSGID_START:
			eeep_Init();
			ESYS_NotifyStartResult(EEEP_SPORT, MOD_ACTION_RESULT_SUCCESS);
			break;
		case EEEP_WRITE_OP_BK0FW:
		case EEEP_WRITE_OP_BK1FW:
		case EEEP_WRITE_OP_WIREMAC:
		case EEEP_WRITE_OP_WLESSMAC:
		{
			EEEP_SetMsg_t * setMsg = (EEEP_SetMsg_t *)msg;
			eeep_WriteData(g_eeep_wrcmd_tbl[msg->msgId].offset, setMsg->data,
											 g_eeep_wrcmd_tbl[msg->msgId].len);
			break;
		}
		default:
			break;
		}
		break;
	case FRM_MSG_EVENT:
		switch(msg->msgId){
		case LFW_MSGID_TIMER_TIMEOUT:
			break;
		case LFW_MSGID_WDT_REQ:
			/* TODO */
			break;
		default:
			break;
		}
		break;
	default:
		break;
	}
	DEBUG_TRCOUT();
}

/*==========================================================================*/
/*	Description		:														*/
/*--------------------------------------------------------------------------*/
/*	param			:														*/
/*--------------------------------------------------------------------------*/
/*	return			:														*/
/*--------------------------------------------------------------------------*/
/*	detail			:														*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/03/16 : DHC Cao.HZ : 新規作成						*/
/*==========================================================================*/
void EEEP_Fin()
{
	DEBUG_TRCIN();
	DEBUG_TRCOUT();
}

/*==========================================================================*/
/*	Description		:														*/
/*--------------------------------------------------------------------------*/
/*	param			:														*/
/*--------------------------------------------------------------------------*/
/*	return			:														*/
/*--------------------------------------------------------------------------*/
/*	detail			:														*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/03/16 : DHC Cao.HZ : 新規作成						*/
/*==========================================================================*/
slong EEEP_Start(slong fact)
{
	EEEP_Start_t msg;

	DEBUG_TRCIN();
	msg.header.msgId = EEEP_MSGID_START;
	msg.fact = fact;
	FRM_MsgSendAsync(EEEP_SPORT, sizeof(msg), &msg);

	DEBUG_TRCOUT();
	return 0;
}

/*==========================================================================*/
/*	Description		:														*/
/*--------------------------------------------------------------------------*/
/*	param			:														*/
/*--------------------------------------------------------------------------*/
/*	return			:														*/
/*--------------------------------------------------------------------------*/
/*	detail			:														*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/03/16 : DHC Cao.HZ : 新規作成						*/
/*==========================================================================*/
slong EEEP_Stop()
{
	DEBUG_TRCIN();
	ESYS_NotifyStopResult(EEEP_SPORT, MOD_ACTION_RESULT_SUCCESS);
	DEBUG_TRCOUT();
	return 0;
}

/*End Of File*/
