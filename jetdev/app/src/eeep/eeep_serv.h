/****************************************************************************/
/*	Description		:														*/
/*--------------------------------------------------------------------------*/
/*	Author			:DHC Cao.HZ												*/
/*--------------------------------------------------------------------------*/
/*	Date			:2023/03/23												*/
/*--------------------------------------------------------------------------*/
/*	Module Name		:														*/
/*--------------------------------------------------------------------------*/
/*	Note			:														*/
/*--------------------------------------------------------------------------*/
/*	Copyright		:(c) 2020 NICHICON CORPORATION							*/
/****************************************************************************/
#ifndef __EEEP_SERV_H__
#define __EEEP_SERV_H__
/*--------------------------------------------------------------------------*/
/*	Include Header File														*/
/*--------------------------------------------------------------------------*/
#include "typedef.h"
/*--------------------------------------------------------------------------*/
/*	マクロ定義																*/
/*--------------------------------------------------------------------------*/
#define EEEP_DEV_PATH "/sys/bus/i2c/devices/0-0050/eeprom"	/* eepromデバイスPATH */
#define EEEP_RECOVER_FILEPATH "/etc/eeprom_recover"
/*--------------------------------------------------------------------------*/
/*	定数宣言、定義															*/
/*--------------------------------------------------------------------------*/
enum{
	EEEP_BANK0 = 0u,
	EEEP_BANK1,
	EEEP_RAM
};

enum{
	EEER_READ_NG = -1,
	EEEP_READ_OK = 0
};
/*--------------------------------------------------------------------------*/
/*	プロトタイプ宣言														*/
/*--------------------------------------------------------------------------*/
static void eeep_Recover(FILE *fp);
static bool_t eeep_CrcCheck(uchar* buf);
static size_t eeep_ReadFile(FILE *fp, uchar ofs, uchar* buf, ushort len);
static size_t eeep_WriteFile(FILE *fp, uchar ofs, uchar* buf, ushort len);
static slong eeep_Check2Bank(FILE *fp);
static slong eeep_CopyBank(FILE *fp, uchar dest, uchar src);

#endif /*__EEEP_SERV_H__*/
