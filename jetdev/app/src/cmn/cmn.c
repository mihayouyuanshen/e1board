/******************************************************************************/
/*    Description    :                                                        */
/*----------------------------------------------------------------------------*/
/*    Author         :DHC GU.CM                                              */
/*----------------------------------------------------------------------------*/
/*    Date           :2023/03/22                                              */
/*----------------------------------------------------------------------------*/
/*    Module Name    :                                                        */
/*----------------------------------------------------------------------------*/
/*    Note           :                                                        */
/*----------------------------------------------------------------------------*/
/*    Copyright      :(c) 2020 NICHICON CORPORATION                           */
/******************************************************************************/

/*----------------------------------------------------------------------------*/
/* Include Header File                                                        */
/*----------------------------------------------------------------------------*/
#include <stdio.h>
#include <string.h>

#include "common_g.h"
#include "dlog_g.h"
//#include "elog.h"
/*----------------------------------------------------------------------------*/
/* 公開変数定義                                                                */
/*----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*/
/* 非公開変数定義                                                              */
/*----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*/
/* 公開関数定義                                                                */
/*----------------------------------------------------------------------------*/
/*============================================================================*/
/*    Description    :メモリアロケーション（デバッグログ出力版）                  */
/*----------------------------------------------------------------------------*/
/*    param          :size_t size       確保するメモリアドレス                  */
/*                   :schar* file       ファイル名の文字列の先頭アドレス         */
/*                   :ulong line        ファイル内の行数                       */
/*----------------------------------------------------------------------------*/
/*    return         :void* addr 取得した                                      */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/03/22  : DHC GU.CM : 新規作成                      */
/*============================================================================*/
void *CMN_LogMalloc(size_t size, schar *file, ulong line)
{
	void *addr = NULL;

	DEBUG_TRCIN();

	addr = malloc(size);

#if 0
	elog_log(ELOG_LV_NORMAL, "[MALLOC]file:%s() line:%ld size[%ld] addr[0x%08x]\n",
			file, line, size, addr);
#endif

	DEBUG_TRCOUT();

	return addr;
}

/*============================================================================*/
/*    Description    :メモリフリー（デバッグログ出力版）                         */
/*----------------------------------------------------------------------------*/
/*    param          :void* addr        解放するメモリアドレス                  */
/*                   :schar* file       ファイル名の文字列の先頭アドレス         */
/*                   :ulong line        ファイル内の行数                       */
/*----------------------------------------------------------------------------*/
/*    return         :void  なし                                              */
/*----------------------------------------------------------------------------*/
/*    detail         :                                                        */
/*----------------------------------------------------------------------------*/
/*    history        :2023/03/22  : DHC GU.CM : 新規作成                       */
/*============================================================================*/
void CMN_LogFree(void *addr, schar *file, ulong line)
{
	DEBUG_TRCIN();

#if 0
	elog_log(ELOG_LV_NORMAL, "[MFREE]file:%s() line:%ld addr[0x%08x]\n",
			file, line, addr);
#endif

	free(addr);

	DEBUG_TRCOUT();

	return;
}

/*==========================================================================*/
/*	Description		:字符串追加												*/
/*--------------------------------------------------------------------------*/
/*	param			:schar *dest		目标buffer							*/
/*					:const schar *src	源字符串							*/
/*					:ulong bufSize		目标buffer大小						*/
/*--------------------------------------------------------------------------*/
/*	return			:void													*/
/*--------------------------------------------------------------------------*/
/*	detail			:字符串追加												*/
/*--------------------------------------------------------------------------*/
/*	history			:2023/05/09 : DHC Wang.M : 新規作成						*/
/*==========================================================================*/
void CMN_Strncat(schar *dest, const schar *src, ulong bufSize)
{
	DEBUG_TRCIN();

	strncat(dest, src, bufSize - strlen(dest) - 1);
	DEBUG_TRCOUT();
}
/*----------------------------------------------------------------------------*/
/* 非公開関数定義                                                              */
/*----------------------------------------------------------------------------*/

/* End Of File */
